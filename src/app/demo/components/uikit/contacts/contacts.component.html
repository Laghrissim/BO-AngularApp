<div class="grid">
    <div class="col-12">
        <div class="card">
            <h5>DataView</h5>
            <div class="col-12">
                <div class="card">
                    <p-toolbar>
                        <div class="p-toolbar-group-left flex flex-wrap">
                            <button
                                pButton
                                type="button"
                                label="Add New Contact"
                                icon="pi pi-plus"
                                class="mr-2"
                                (click)="openNew()"
                            ></button>
                        </div>
                    </p-toolbar>
                </div>
            </div>
            <p-dataView
                #dv
                [value]="contacts"
                [paginator]="true"
                [rows]="9"
                filterBy="name"
                [sortField]="sortField"
                [sortOrder]="sortOrder"
                layout="grid"
            >
                <ng-template pTemplate="header">
                    <div
                        class="flex flex-column md:flex-row md:justify-content-between gap-2"
                    >
                        <p-dropdown
                            [options]="sortOptions"
                            placeholder="Sort By Price"
                            (onChange)="onSortChange($event)"
                        ></p-dropdown>
                        <span class="p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input
                                type="search"
                                pInputText
                                placeholder="Search by Name"
                                (input)="onFilter(dv, $event)"
                            />
                        </span>
                        <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
                    </div>
                </ng-template>

                <ng-template let-contacts pTemplate="listItem">
                    <div class="col-12" *ngFor="let project of contacts">
                        <div
                            class="flex flex-column md:flex-row align-items-center p-3 w-full"
                        >
                            <img
                                [src]="project.picture"
                                [alt]="project.name"
                                class="my-4 md:my-0 w-9 md:w-10rem shadow-2 mr-5"
                            />
                            <div
                                class="flex-1 flex flex-column align-items-center text-center md:text-left"
                            >
                                <div class="font-bold text-2xl">
                                    {{ project.name }}
                                </div>
                                <div class="mb-2">
                                    {{ project.email }}
                                </div>

                                <div class="mb-2">
                                    {{ project.mobile }}
                                </div>
                                <!--								<p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false" styleClass="mb-2"></p-rating>-->
                                <div class="flex align-items-center mt-2">
                                    <i class="pi pi-tag mr-2"></i>
                                    <span
                                        class="font-semibold click"
                                        style="cursor: pointer"
                                    >{{ project.users.length }}

                                        {{
                                        project.users.length
                                            | pluralize : "User" : "Users"
                                        }}
                                    </span>
                                </div>
                            </div>

                            <div
                                class="flex flex-row md:flex-column justify-content-between w-full md:w-auto align-items-center md:align-items-end mt-5 md:mt-0"
                            >
                                <div
                                    class="p-toolbar-group-left flex flex-wrap"
                                >

                                    <button
                                        pButton
                                        type="button"
                                        icon="pi pi-pencil"
                                        class="p-button-warning mr-2"
                                        (click)="editProduct(project)"
                                    ></button>
                                    <button
                                        pButton
                                        type="button"
                                        icon="pi pi-trash"
                                        class="p-button-danger"
                                        (click)="deleteProduct(project)"
                                    ></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-template>

                <ng-template let-contacts pTemplate="gridItem">
                    <div class="grid grid-nogutter">
                        <div
                            class="col-12 md:col-4"
                            *ngFor="let project of contacts"
                        >
                            <div class="card m-3 border-1 surface-border">
                                <div
                                    class="flex flex-column align-items-center text-center mb-3"
                                >
                                    <img
                                        [src]="project.picture"
                                        [alt]="project.name"
                                        class="w-9 shadow-2 my-3 mx-0"
                                    />
                                    <div class="text-2xl font-bold">
                                        {{ project.name }}
                                    </div>
                                    <div class="mb-3">
                                        {{ project.email }}
                                    </div>
                                    <div class="mb-2">
                                        {{ project.mobile }}
                                    </div>
                                    <span
                                        class="text-2xl font-semibold click"
                                        style="cursor: pointer"
                                    >{{ project.users.length }}
                                        {{
                                        project.users.length
                                            | pluralize : "User" : "Users"
                                        }}</span
                                    >
                                </div>

                                <div
                                    class="flex flex-wrap gap-2 align-items-center justify-content-flex-end mb-2"
                                >
                                    <div
                                        class="p-toolbar-group-left flex flex-wrap"
                                    >

                                        <button
                                            pButton
                                            type="button"
                                            icon="pi pi-pencil"
                                            (click)="editProduct(project)"
                                            class="p-button-warning mr-2"
                                        ></button>
                                        <button
                                            pButton
                                            type="button"
                                            icon="pi pi-trash"
                                            class="p-button-danger"
                                            (click)="deleteProduct(project)"
                                        ></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </p-dataView>
        </div>
    </div>

    <!--	<div class="col-12 xl:col-8">-->
    <!--		<div class="card">-->
    <!--			<h5>PickList</h5>-->
    <!--			<p-pickList [source]="sourceCities" [target]="targetCities" sourceHeader="From" targetHeader="To" [dragdrop]="true"-->
    <!--						[responsive]="true" [sourceStyle]="{'height':'250px'}" [targetStyle]="{'height':'250px'}">-->
    <!--				<ng-template let-city pTemplate="item">-->
    <!--					<div>{{city.name}}</div>-->
    <!--				</ng-template>-->
    <!--			</p-pickList>-->
    <!--		</div>-->
    <!--	</div>-->

    <!--	<div class="col-12 xl:col-4">-->
    <!--		<div class="card">-->
    <!--			<h5>OrderList</h5>-->
    <!--			<p-orderList [value]="orderCities" header="Cities" [dragdrop]="true" [listStyle]="{'height':'250px'}">-->
    <!--				<ng-template let-city pTemplate="item">-->
    <!--					<div>{{city.name}}</div>-->
    <!--				</ng-template>-->
    <!--			</p-orderList>-->
    <!--		</div>-->
    <!--	</div>-->
</div>
<p-dialog [(visible)]="productDialog" [style]="{width: '450px'}" header="Product Details" [modal]="true" class="p-fluid">
    <ng-template pTemplate="content">
        <img [src]="product.picture" [alt]="product.name" width="150" class="mt-0 mx-auto mb-5 block shadow-2" *ngIf="product.picture">
        <div class="field">
            <label for="name">Name</label>
            <input type="text" pInputText id="name" [(ngModel)]="product.name" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !product.name}"/>
            <small class="ng-dirty ng-invalid" style="color:red;" *ngIf="submitted && !product.name">Name is required.</small>
        </div>
        <div class="field">
            <label for="email">Email</label>
            <input type="text" pInputText id="email" [(ngModel)]="product.email" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !product.email}"/>
            <small class="ng-dirty ng-invalid" style="color:red;" *ngIf="submitted && !product.email">Email is required.</small>

        </div>
        <div class="field">
            <label for="address">Address</label>
            <textarea id="address" pInputTextarea [(ngModel)]="product.address" required rows="3" cols="20"></textarea>
            <small class="ng-dirty ng-invalid" style="color:red;" *ngIf="submitted && !product.address">Address is required.</small>

        </div>


        <div class="field">
            <label for="mobile">Mobile</label>
            <input type="text" pInputText id="mobile" [(ngModel)]="product.mobile"  autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !product.name}"/>
            <small class="ng-dirty ng-invalid" style="color:red;" *ngIf="submitted && !product.mobile">Mobile is required.</small>

        </div>
        <p-fileUpload mode="basic" accept="image/*" [maxFileSize]="8000000" label="Import Image" chooseLabel="Import" class="mr-2 inline-block" (onSelect)="onFileSelect($event)"></p-fileUpload><br>
        <small class="ng-dirty ng-invalid" style="color:red;" *ngIf="submitted && !product.picture">Image is required.</small>

    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveProduct()"></button>
    </ng-template>
</p-dialog>
<p-dialog [(visible)]="deleteProductDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
    <div class="flex align-items-center justify-content-center">
        <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
        <span *ngIf="product">Are you sure you want to delete <b>{{product.name}}</b>?</span>
    </div>
    <ng-template pTemplate="footer">
        <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductDialog = false"></button>
        <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Yes" (click)="confirmDelete()"></button>
    </ng-template>
</p-dialog>
